# Inception-Tutorial
Tutorial to install Debian virtual machine with multiple virtualised Docker images

## 1- _Descargar imagen de la maquina virtual_ üíø

[Click aqui](https://www.debian.org/distrib/index.es.html) para redireccionarte a la URL donde puedes descargar la ISO de manera segura.

## 2- Instalacion de la maquina üõ†

Para realizar la instalaci√≥n se requiere de un software de virtualizaci√≥n. En este tutorial haremos uso de [VirtualBox](https://www.virtualbox.org/). Si ya tienes VirtualBox instalado y dispones de la ISO Debian ya podemos empezar con el tutorial.

1 ‚ó¶ Debemos abrir VirtualBox y pinchar sobre ```New```



2 ‚ó¶ Escogemos el nombre de nuestra m√°quina y la carpeta donde estar√° ubicada. Importante introducir la maquina dentro de la carpeta sgoinfre ya que si no la ubicamos ah√≠ nos quedaremos sin espacio y fallar√° la instalaci√≥n (dependiendo del campus la ruta de sgoinfre puede cambiar).

<img width="950" alt="Screen Shot 2023-09-29 at 12 21 06 PM" src="https://github.com/gemartin99/Inception-Tutorial/assets/66915274/3d7d6d60-57db-41e2-aebb-65f24b96fe61">

3 ‚ó¶

<img width="948" alt="Screen Shot 2023-09-29 at 12 22 16 PM" src="https://github.com/gemartin99/Inception-Tutorial/assets/66915274/839003e3-f27a-4408-be9a-7a40193a961b">

4 ‚ó¶

<img width="952" alt="Screen Shot 2023-09-29 at 12 22 36 PM" src="https://github.com/gemartin99/Inception-Tutorial/assets/66915274/188be130-e3e0-4227-a054-f2cc77ea3654">

5 ‚ó¶

<img width="949" alt="Screen Shot 2023-09-29 at 12 23 01 PM" src="https://github.com/gemartin99/Inception-Tutorial/assets/66915274/82b7927b-59ac-4d8a-a1e0-97d95880300c">

6 ‚ó¶

<img width="950" alt="Screen Shot 2023-09-29 at 12 23 21 PM" src="https://github.com/gemartin99/Inception-Tutorial/assets/66915274/138b9feb-ffc4-41e1-947e-597011970a33">


üëÄ 

<img width="671" alt="Screen Shot 2023-09-29 at 12 37 18 PM" src="https://github.com/gemartin99/Inception-Tutorial/assets/66915274/d0965811-4bb4-4238-904a-bbcfd6de571b">


<img width="637" alt="Screen Shot 2023-09-29 at 12 37 28 PM" src="https://github.com/gemartin99/Inception-Tutorial/assets/66915274/365e2e2e-c38b-4e8a-8dcb-5c85dfc38c89">


<img width="799" alt="Screen Shot 2023-09-29 at 12 38 26 PM" src="https://github.com/gemartin99/Inception-Tutorial/assets/66915274/8f5d0b44-08f4-495f-8a47-9b94a5222ba0">

<img width="798" alt="Screen Shot 2023-09-29 at 12 38 37 PM" src="https://github.com/gemartin99/Inception-Tutorial/assets/66915274/9ceafe0e-ba3c-4c1e-a0f3-ce66d380bc20">

<img width="806" alt="Screen Shot 2023-09-29 at 12 38 52 PM" src="https://github.com/gemartin99/Inception-Tutorial/assets/66915274/08e55c36-949a-4c2a-bae5-7c1a12eeea9c">

<img width="799" alt="Screen Shot 2023-09-29 at 12 39 58 PM" src="https://github.com/gemartin99/Inception-Tutorial/assets/66915274/3de03823-1842-4d30-922c-751b51f3db8b">

<img width="802" alt="Screen Shot 2023-09-29 at 12 40 13 PM" src="https://github.com/gemartin99/Inception-Tutorial/assets/66915274/b5b2d669-a7df-4643-87b8-95cfc25adc0a">

<img width="801" alt="Screen Shot 2023-09-29 at 12 40 32 PM" src="https://github.com/gemartin99/Inception-Tutorial/assets/66915274/cab79158-0dd7-4782-8cc5-ac42a17a4e3e">

<img width="797" alt="Screen Shot 2023-09-29 at 12 40 45 PM" src="https://github.com/gemartin99/Inception-Tutorial/assets/66915274/cef7fcc6-a8b6-435d-a840-9c7126afeb8f">

<img width="797" alt="Screen Shot 2023-09-29 at 12 40 54 PM" src="https://github.com/gemartin99/Inception-Tutorial/assets/66915274/23c43cac-57b6-485d-881d-580f3ac40410">

<img width="799" alt="Screen Shot 2023-09-29 at 12 41 10 PM" src="https://github.com/gemartin99/Inception-Tutorial/assets/66915274/3f452fe9-67c0-474d-8676-c3d166dd1eb2">

<img width="804" alt="Screen Shot 2023-09-29 at 12 41 19 PM" src="https://github.com/gemartin99/Inception-Tutorial/assets/66915274/849ee5e0-3c49-4a4f-9d59-114c14e8ca1f">

<img width="798" alt="Screen Shot 2023-09-29 at 12 41 37 PM" src="https://github.com/gemartin99/Inception-Tutorial/assets/66915274/3bc537f3-399c-4f6b-b4b3-eb4701bf8e89">

<img width="794" alt="Screen Shot 2023-09-29 at 12 41 47 PM" src="https://github.com/gemartin99/Inception-Tutorial/assets/66915274/09344f70-8e13-47a2-ab9b-095c303bf1df">

<img width="797" alt="Screen Shot 2023-09-29 at 12 41 57 PM" src="https://github.com/gemartin99/Inception-Tutorial/assets/66915274/c8f5334b-7b16-4c89-8692-ac9bab27c8c4">

<img width="795" alt="Screen Shot 2023-09-29 at 12 42 08 PM" src="https://github.com/gemartin99/Inception-Tutorial/assets/66915274/2607be77-4b14-4be0-9034-bbc205906939">

<img width="794" alt="Screen Shot 2023-09-29 at 12 42 24 PM" src="https://github.com/gemartin99/Inception-Tutorial/assets/66915274/7cd2cf99-9dea-4bcb-bb6e-c82593a99d26">

<img width="799" alt="Screen Shot 2023-09-29 at 12 45 36 PM" src="https://github.com/gemartin99/Inception-Tutorial/assets/66915274/99be4916-4548-4abe-83a6-654b4a583628">

<img width="793" alt="Screen Shot 2023-09-29 at 12 45 47 PM" src="https://github.com/gemartin99/Inception-Tutorial/assets/66915274/f301cefd-d55c-448a-be5d-e9caedb929f5">

<img width="800" alt="Screen Shot 2023-09-29 at 12 45 57 PM" src="https://github.com/gemartin99/Inception-Tutorial/assets/66915274/d4026b01-2208-400a-95f6-d9b565626497">

<img width="795" alt="Screen Shot 2023-09-29 at 12 46 06 PM" src="https://github.com/gemartin99/Inception-Tutorial/assets/66915274/667eac87-9653-4d94-9864-056dfecf99fe">

<img width="797" alt="Screen Shot 2023-09-29 at 12 52 46 PM" src="https://github.com/gemartin99/Inception-Tutorial/assets/66915274/f3ae4683-a821-4278-b7fc-828936388ecc">

<img width="796" alt="Screen Shot 2023-09-29 at 1 00 38 PM" src="https://github.com/gemartin99/Inception-Tutorial/assets/66915274/fc3ec5d6-df9b-4723-840b-e1a3c203c4d6">

<img width="796" alt="Screen Shot 2023-09-29 at 1 12 48 PM" src="https://github.com/gemartin99/Inception-Tutorial/assets/66915274/33ad31b4-be0b-4e1b-acb9-d0e14df9f8a4">

<img width="800" alt="Screen Shot 2023-09-29 at 1 13 00 PM" src="https://github.com/gemartin99/Inception-Tutorial/assets/66915274/9b4f1226-a852-479f-a8d3-523f44c923a3">

<img width="797" alt="Screen Shot 2023-09-29 at 1 14 06 PM" src="https://github.com/gemartin99/Inception-Tutorial/assets/66915274/9c39135c-32ef-467c-87cb-9de7bab7af82">



## Archivo .yml

üß† Que es un archivo yml‚ùì

Es un archivo de configuraci√≥n utilizado para definir y gestionar m√∫ltiples contenedores en un entorno Docker. Permite describir las relaciones, configuraciones y servicios que compondr√°n una aplicaci√≥n o conjunto de servicios interconectados.

<img width="765" alt="Screen Shot 2023-10-03 at 12 25 20 AM" src="https://github.com/gemartin99/Inception-Tutorial/assets/66915274/8355f598-fe5f-4ae0-b3fc-5adcf0f94158">

```
networks:
    gemartinnet:
        name: gemartinnet
        driver: bridge
```

En este apartado definimos las redes. En este caso definimos una red llamada ```gemartinnet``` con el controlador de red como ```bridge```. Esto lo que va a indicar esque sera una red de tipo bridge, lo que permitira a los contenedores comunicarse entre s√≠ en el mismo host.

```
services:
    nginx:
        container_name: nginx
        build: ./requirements/nginx
        image: nginx
        ports:
        - 443:443
        volumes:
        - wordpress_data:/var/www/html
        restart: always
        networks:
        - gemartinnet
```

En este apartado se definen los servicios que ejecutaran los contenedores. El primer servicio es ```nginx```. Esto es lo que hacen las siguientes configuraciones:

container_name ‚Üí Asigna un nombre especifico al contenedor que se crea a partir de este servicio.

build ‚Üí Indica la ubicacion del Dockerfile y los archivos necesarios para construir la imagen del contenedor.

image ‚Üí Indica a docker que imagen debe usar como base para el servicio que estas definiendo. Si la imagen no se encuentra a nivel local en el sistema docker la descargara automaticamente.

ports ‚Üí Indicamos que queremos hacer un mapeo de puertos, esto es una redireccion de puertos de un sistema operativo a otro. Para explicarlo mejor, tenemos un servidor web (nginx) ejecutandose dentro del contenedor, por defecto no es accesible desde fuera del contenedor. Al hacer el mapeo de puertos especificaremos el puerto del servidor web para que este disponible desde el sistema anfitrion. Dicho esto ponemos 443:443 para indicar el PUERTO_DEL_HOST:PUERTO_DEL_CONTENEDOR. 

volumes ‚Üí Creamos un volumen en el host al directorio que especifiquemos en el contenedor. El proceso de montar un volumen se asemeja a "conectar" una carpeta del sistema operativo anfitri√≥n con una carpeta dentro del contenedor. Esto permite que los datos sean compartidos y persistan incluso despu√©s de que el contenedor se detenga o se reinicie. Es importante comentar que en esta parte solo diremos que el contenido del volumen llamado wordpress_data lo encontraremos en la ubicacion /var/www/html dentro del contenedor. La configuracion del volumen wordpress_data y mariadb_data es definida al final del fichero. Otra cosa importante a comentar es que WordPress y Nginx comparten volumen, esto lo utilizamos para servir archivos del sitio web desde el contenedor de NGINX, y si se actualizan o modifican esos archivos desde el contenedor WordPress los cambios se reflejar√°n inmediatamente en el sitio web sin necesidad de detener y volver a iniciar el contenedor de NGINX. Esto proporciona una forma eficiente de trabajar con aplicaciones web y mantener los datos consistentes.

restart ‚Üí Indica como debe comportarse el contenedor en caso de que se detenga. Basicamente lo que decimos es que si el contenedor asociado al servicio Nginx se detiene por algun motivo Docker lo reiniciara automaticamente.

networks ‚Üí Especifica a que red o redes debe estar conectado un contenedor. En nuestro caso le decimos que el contenedor asociado al servicio nginx estara conectada a la red gemartinnet.

```
mariadb:
    container_name: mariadb
    build:
       context: ./requirements/mariadb
    image: mariadb
    volumes:
     - mariadb_data:/var/lib/mysql
    restart: always
    networks:
     - gemartinnet
    env_file:
     - .env
```

Como todos los campos han sido explicados previamente menos env_file solo explicare este.

env_file ‚Üí Permite especificar un archivo que contiene variables de entorno para ser utilizadas por el contenedor. Estas variables de entorno pueden ser utilizadas dentro del contenedor, por la base de datos MariaDB en este caso, para configurar el entorno de ejecuci√≥n.

```
wordpress:
    container_name: wordpress
    build: ./requirements/wordpress
    image: wordpress
    depends_on:
     - mariadb
    volumes:
     - wordpress_data:/var/www/html
    restart: always
    networks:
     - gemartinnet
    env_file:
     - .env
```

Todos los campos han sido explicados previamente


































